---
layout: post
title: awk, un exemple pour bien débuter et comprendre...
---
<script src="http://pastebin.com/embed_js.php?i=msK3D2Pa"></script><br /><br /><script src="http://pastebin.com/embed_js.php?i=7bd3x9Ra"></script><br /><br />awk n'est pas si compliqué que ça lorsque l'on comprend la philosophie...<br /><br />La commande se décompose de la manière suivante :<br /><br />BEGIN { CODE_DEBUT } MATCHAGE { CODE } END { CODE_FIN }<br /><br /><ul><li>CODE_DEBUT est exécuté au début du traitement du fichier ou flux</li><li>CODE_FIN est exécuté à la fin du traitement du fichier ou flux</li><li>CODE est exécuté sur les lignes du fichier ou flux matchées par les règles de MATCHAGE</li></ul><br />Dans l'exemple ci-dessus,<br /><ul><li>-F ';' indique que le séparateur de champs est le ;</li><li>les -v permettent de déclarer une variable awk à partir d'une variable bash (pour transmettre les informations)</li><li>NR correspond au numéro de la ligne traitée (on ignore l'entête du fichier avec le test supérieur ou égal à 2)</li><li>/;/ correspond aux lignes qui contiennent un ;</li><li>!/^#/ correspond aux lignes qui ne débutent pas par un dièse</li></ul><br />Le programme ci-dessus crée les requêtes à exécuter sur chacune des bases de données pour chacun des enregistrements du fichier file.txt<br /><br />Comme quoi, on peut démystifier awk ;) <br /><br /><div style="height: 0; overflow: hidden;">awk, base, for</div>
