---
layout: post
title: "Jetty 8 et paramètres d'initialisation"
date: "2012-07-17 17:14:00"
---
La documentation sur le net est obscure quant à la manière d'initialiser les paramètres de contexte avec jetty (hors du web.xml dans le webdefault.xml (équivalent du host.xml de tomcat)). <br/><br/>J'ai cherché, cherché et cherché...  <br/><br/>Et puis j'ai trouvé :)  Le nouveau code est le suivant :  <pre><code><br />&lt;?xml version="1.0"  encoding="ISO-8859-1"?&gt;<br />&lt;!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" <br />"http://www.eclipse.org/jetty/configure.dtd"&gt;<br /><br />&lt;Configure class="org.eclipse.jetty.webapp.WebAppContext"&gt;<br /><br />  &lt;Set name="sessionHandler"&gt;<br />    &lt;New class="org.eclipse.jetty.server.session.SessionHandler"&gt;<br />      &lt;Arg&gt;<br />        &lt;New class="org.eclipse.jetty.server.session.HashSessionManager"&gt;<br />          &lt;Set name="storeDirectory"&gt;jetty/sessions&lt;/Set&gt;<br />        &lt;/New&gt;<br />      &lt;/Arg&gt;<br />    &lt;/New&gt;<br />  &lt;/Set&gt;<br />  &lt;Get name="ServletContext"&gt;<br />    &lt;Call name="setInitParameter"&gt;<br />      &lt;Arg&gt;driverSQL&lt;/Arg&gt;<br />      &lt;Arg&gt;com.mysql.jdbc.Driver&lt;/Arg&gt;<br />    &lt;/Call&gt;<br />  &lt;/Get&gt;<br />&lt;/Configure&gt;<br /></code></pre> L'ancien code était le suivant :  <pre><code><br />&lt;?xml version="1.0"  encoding="ISO-8859-1"?&gt;<br />&lt;!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" <br />"http://www.eclipse.org/jetty/configure.dtd"&gt;<br /><br />&lt;Configure class="org.eclipse.jetty.webapp.WebAppContext"&gt;<br />  &lt;Set name="sessionHandler"&gt;<br />    &lt;New class="org.eclipse.jetty.server.session.SessionHandler"&gt;<br />      &lt;Arg&gt;<br /> &lt;New class="org.eclipse.jetty.server.session.HashSessionManager"&gt;<br />   &lt;Set name="storeDirectory"&gt;jetty-sessions&lt;/Set&gt;<br /> &lt;/New&gt;<br />      &lt;/Arg&gt;<br />    &lt;/New&gt;<br />  &lt;/Set&gt;<br />  &lt;Set name="initParams"&gt;<br />    &lt;Map&gt;<br /><br />      &lt;Entry&gt;<br /> &lt;Item&gt;driverSQL&lt;/Item&gt;<br /> &lt;Item&gt;com.mysql.jdbc.Driver&lt;/Item&gt;<br />      &lt;/Entry&gt;<br />&lt;/Map&gt;<br />  &lt;/Set&gt;<br />&lt;/Configure&gt;<br /></code></pre> Ce n'est pas très différent mais il fallait trouver, la documentation en ligne n'en parlant pas !  En espérant que ça vous fasse économiser de précieuses heures...  A vos servletContext.getInitParameter !!!
